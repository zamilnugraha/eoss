(function(){'use strict';let queue=window.fathom.q||[];let config={'siteId':'','trackerUrl':'//collect.usefathom.com/'};const commands={"set":set,"trackPageview":trackPageview,"setTrackerUrl":setTrackerUrl,};function set(key,value){config[key]=value}function setTrackerUrl(value){set("trackerUrl",'//collect.usefathom.com/');return'//collect.usefathom.com/'}function stringifyObject(obj){var keys=Object.keys(obj);return'?'+keys.map(function(k){return encodeURIComponent(k)+'='+encodeURIComponent(obj[k])}).join('&')}function randomString(n){var s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";return Array(n).join().split(',').map(()=>s.charAt(Math.floor(Math.random()*s.length))).join('')}function getCookie(name){var cookies=document.cookie?document.cookie.split('; '):[];for(var i=0;i<cookies.length;i++){var parts=cookies[i].split('=');if(decodeURIComponent(parts[0])!==name){continue}var cookie=parts.slice(1).join('=');return decodeURIComponent(cookie)}return''}function setCookie(name,data,args){name=encodeURIComponent(name);data=encodeURIComponent(String(data));var str=name+'='+data;if(args.path){str+=';path='+args.path}if(args.expires){str+=';expires='+args.expires.toUTCString()}document.cookie=str}function newVisitorData(){return{isNewVisitor:true,isNewSession:true,pagesViewed:[],previousPageviewId:'',lastSeen:+new Date(),}}function getData(){let thirtyMinsAgo=new Date();thirtyMinsAgo.setMinutes(thirtyMinsAgo.getMinutes()-30);let data=getCookie('_fathom');if(!data){return newVisitorData()}try{data=JSON.parse(data)}catch(e){console.error(e);return newVisitorData()}if(data.lastSeen<(+thirtyMinsAgo)){data.isNewSession=true}return data}function trackPageview(vars){vars=vars||{};if('doNotTrack'in navigator&&navigator.doNotTrack==="1"){return}if('visibilityState'in document&&document.visibilityState==='prerender'){return}if(document.body===null){document.addEventListener("DOMContentLoaded",function(){trackPageview(vars)});return}let req=window.location;if(req.host===''){return}let canonical=document.querySelector('link[rel="canonical"][href]');if(canonical){let a=document.createElement('a');a.href=canonical.href;req=a}let path=vars.path||(req.pathname+req.search);if(!path){path='/'}let hostname=vars.hostname||(req.protocol+"//"+req.hostname);let referrer=vars.referrer||'';if(document.referrer.indexOf(hostname)<0){referrer=document.referrer}let data=getData();const d={id:randomString(20),pid:data.previousPageviewId||'',p:path,h:hostname,r:referrer,u:data.pagesViewed.indexOf(path)==-1?1:0,nv:data.isNewVisitor?1:0,ns:data.isNewSession?1:0,sid:config.siteId};let fathomScript=document.getElementById('fathom-script');if(fathomScript){d.dash=fathomScript.src.replace('/tracker.js','');if(d.dash.indexOf('cdn.usefathom.com')>-1){d.dash=null}}let url=config.trackerUrl;let img=document.createElement('img');img.setAttribute('alt','');img.setAttribute('aria-hidden','true');img.src=url+stringifyObject(d);img.addEventListener('load',function(){let now=new Date();let midnight=new Date(now.getFullYear(),now.getMonth(),now.getDate(),24,0,0);if(data.pagesViewed.indexOf(path)==-1){data.pagesViewed.push(path)}data.previousPageviewId=d.id;data.isNewVisitor=false;data.isNewSession=false;data.lastSeen=+new Date();setCookie('_fathom',JSON.stringify(data),{expires:midnight,path:'/'});document.body.removeChild(img)});window.setTimeout(()=>{if(!img.parentNode){return}img.src='';document.body.removeChild(img)},3000);document.body.appendChild(img)}window.fathom=function(){var args=[].slice.call(arguments);var c=args.shift();commands[c].apply(this,args)};queue.forEach((i)=>fathom.apply(this,i))})()
